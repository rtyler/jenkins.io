<!DOCTYPE html>
<html>
<head>
<title>
Multibranch Pipelines
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins is an open source automation server" name="description">
<link href="/sites/default/files/jenkins_favicon.ico" rel="shortcut icon" type="image/x-icon">
<!-- starting partial scriptlinks.html.haml -->
<link href="https://rtyler.github.io/jenkins.io/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="https://rtyler.github.io/jenkins.io/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="https://rtyler.github.io/jenkins.io/assets/bower/ekko-lightbox/ekko-lightbox.min.css" media="screen" rel="stylesheet">
<link href="https://rtyler.github.io/jenkins.io/assets/bower/tether/css/tether.min.css" media="screen" rel="stylesheet">
<link href="https://rtyler.github.io/jenkins.io/css/font-icons.css" media="screen" rel="stylesheet">
<link href="https://rtyler.github.io/jenkins.io/css/jenkins.css" media="screen" rel="stylesheet">
<script src="https://rtyler.github.io/jenkins.io/assets/bower/jquery/jquery.min.js"></script>
<script src="https://rtyler.github.io/jenkins.io/assets/bower/tether/js/tether.min.js"></script>
<script src="https://rtyler.github.io/jenkins.io/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="https://rtyler.github.io/jenkins.io/assets/bower/ekko-lightbox/ekko-lightbox.min.js"></script>

<!-- ending partial scriptlinks.html.haml -->
</head>
<body>
<!-- starting partial toptoolbar.html.haml -->
<script>
  $(function () {
    $(document).delegate('*[data-toggle="lightbox"]', 'click', function(event) {
      event.preventDefault();
      $(this).ekkoLightbox();
    });
  })
</script>
<div id="ji-hover-layer"></div>
<div class="ji-toolbar-offset"></div>
<div class="fixed top">
<nav class="navbar navbar-dark bg-inverse" id="ji-toolbar">
<a class="fixed navbar-brand" href="/" id="home-logo">
Jenkins
</a>
<ul class="nav navbar-nav">
<li class="nav-item fixed">
<div class="btn-group" id="download-menu">
<a aria-expanded="false" aria-haspopup="true" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
Downloads
</a>
<!-- starting partial downloadlist.html.haml -->
<div class="dropdown-menu">
<div class="row">
<div class="col-md-6 text-xs-center">
<h3>
LTS Release
</h3>
<p>
LTS (Long-Term Support) releases are chosen every 12 weeks from the
stream of regular releases as the stable release for that time period.
</p>
</div>
<div class="col-md-6 text-xs-center">
<h3>
Weekly Release
</h3>
<p>
A new release is produced weekly to deliver bug fixes and features to
users and plugin developers.
</p>
</div>
</div>
<div class="row">
<div class="col-md-6 text-xs-center">
<div class="btn-group">
<a class="btn btn-primary chromeOnly" href="http://mirrors.jenkins.io/war-stable/latest/jenkins.war">
<i class="icon-box-add"></i>
2.19.4
.war
</a>
<button aria-expanded="false" aria-haspopup="true" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" data-trigger="hover"></button>
<div class="dropdown-menu">
<a class="dropdown-item" href="https://registry.hub.docker.com/u/jenkinsci/jenkins/">
<span class="icon"></span>
<span class="title">
Docker
</span>
</a>
<a class="dropdown-item" href="http://www.freshports.org/devel/jenkins-lts">
<span class="icon"></span>
<span class="title">
FreeBSD
</span>
</a>
<a class="dropdown-item" href="https://packages.gentoo.org/packages/dev-util/jenkins-bin">
<span class="icon"></span>
<span class="title">
Gentoo
</span>
</a>
<a class="dropdown-item" href="/content/thank-you-downloading-os-x-installer#stable">
<span class="icon"></span>
<span class="title">
Mac OS X
</span>
</a>
<a class="dropdown-item" href="http://openports.se/devel/jenkins/stable">
<span class="icon"></span>
<span class="title">
OpenBSD
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/opensuse-stable/">
<span class="icon"></span>
<span class="title">
openSUSE
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/redhat-stable/">
<span class="icon"></span>
<span class="title">
Red Hat/Fedora/CentOS
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/debian-stable/">
<span class="icon"></span>
<span class="title">
Ubuntu/Debian
</span>
</a>
<a class="dropdown-item" href="/content/thank-you-downloading-windows-installer#stable">
<span class="icon"></span>
<span class="title">
Windows
</span>
</a>
</div>
</div>
<p class="details">
<a class="item" href="/changelog-stable">Changelog</a>
|
<a class="item" href="/doc/upgrade-guide">Upgrade Guide</a>
|
<a class="item" href="http://mirrors.jenkins.io/war-stable/">Past Releases</a>
</p>
</div>
<div class="col-md-6 text-xs-center">
<div class="btn-group">
<a class="btn btn-primary chromeOnly" href="http://mirrors.jenkins.io/war/latest/jenkins.war">
<i class="icon-box-add"></i>
2.34
.war
</a>
<button aria-expanded="false" aria-haspopup="true" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" data-trigger="hover"></button>
<div class="dropdown-menu">
<a class="dropdown-item" href="https://registry.hub.docker.com/u/jenkinsci/jenkins/">
<span class="icon"></span>
<span class="title">
Docker
</span>
</a>
<a class="dropdown-item" href="http://www.freshports.org/devel/jenkins">
<span class="icon"></span>
<span class="title">
FreeBSD
</span>
</a>
<a class="dropdown-item" href="https://packages.gentoo.org/packages/dev-util/jenkins-bin">
<span class="icon"></span>
<span class="title">
Gentoo
</span>
</a>
<a class="dropdown-item" href="/content/thank-you-downloading-os-x-installer">
<span class="icon"></span>
<span class="title">
Mac OS X
</span>
</a>
<a class="dropdown-item" href="http://openports.se/devel/jenkins/devel">
<span class="icon"></span>
<span class="title">
OpenBSD
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/opensuse/">
<span class="icon"></span>
<span class="title">
openSUSE
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/redhat/">
<span class="icon"></span>
<span class="title">
Red Hat/Fedora/CentOS
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/debian/">
<span class="icon"></span>
<span class="title">
Ubuntu/Debian
</span>
</a>
<a class="dropdown-item" href="/content/thank-you-downloading-windows-installer">
<span class="icon"></span>
<span class="title">
Windows
</span>
</a>
</div>
</div>
<p class="details">
<a class="item" href="/changelog">Changelog</a>
|
<a class="item" href="http://mirrors.jenkins.io/war/">Past Releases</a>
</p>
</div>
</div>
</div>

<!-- ending partial downloadlist.html.haml -->
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="/node">
Blog
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="/doc">
Documentation
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">
Use-cases
</a>
<div class="dropdown-menu">
<a class="dropdown-item feature" href="/solutions/android">
Android
</a>
<a class="dropdown-item feature" href="/solutions/c">
C/C++
</a>
<a class="dropdown-item feature" href="/solutions/docker">
Docker
</a>
<a class="dropdown-item feature" href="/solutions/embedded">
Embedded
</a>
<a class="dropdown-item feature" href="/solutions/github">
GitHub
</a>
<a class="dropdown-item feature" href="/solutions/java">
Java
</a>
<a class="dropdown-item feature" href="/solutions/pipeline">
Continuous Delivery
</a>
<a class="dropdown-item feature" href="/solutions/python">
Python
</a>
<a class="dropdown-item feature" href="/solutions/ruby">
Ruby
</a>
</div>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">
Participate
</a>
<div class="dropdown-menu">
<a class="dropdown-item" href="/content/mailing-lists" title="Browse Jenkins mailing list archives and/or subscribe to lists">
Mailing Lists
</a>
<a class="dropdown-item" href="/content/chat" title="Chat with the rest of the Jenkins community on IRC">
Chat
</a>
<a class="dropdown-item" href="https://twitter.com/jenkinsci" title="Check out @jenkinsci on Twitter">
Twitter
</a>
<a class="dropdown-item" href="/content/event-calendar" title="Calendar for Jenkins events">
Events
</a>
<a class="dropdown-item" href="https://wiki.jenkins-ci.org/display/JENKINS/Office+Hours" title="Hangouts-based online meeting">
Office Hours
</a>
<a class="dropdown-item" href="https://reddit.com/r/jenkinsci" title="Latest Jenkins related news on /r/jenkinsci">
/r/jenkinsci
</a>
</div>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="/projects" role="button">
Sub-projects
</a>
<div class="dropdown-menu">
<a class="dropdown-item feature" href="/projects/">
Overview
</a>
<a class="dropdown-item feature" href="/projects/blueocean/">
Blue Ocean
</a>
<a class="dropdown-item feature" href="/projects/gsoc/">
Google Summer of Code
</a>
<a class="dropdown-item feature" href="/projects/infrastructure/">
Infrastructure
</a>
<a class="dropdown-item feature" href="/projects/jam/">
Jenkins Area Meetups
</a>
</div>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="/projects" role="button">
Resources
</a>
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://accounts.jenkins.io/" title="Create/manage your account for accessing wiki, issue tracker, etc">
Account Management
</a>
<a class="dropdown-item feature" href="https://issues.jenkins-ci.org/">
Issue Tracker
</a>
<a class="dropdown-item feature" href="https://wiki.jenkins-ci.org/">
Wiki
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="/security">
Security
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="/press">
Press
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="/conduct">
Conduct
</a>
</li>
</ul>
</nav>
</div>
<div id="ji-top-peg">
<a href="https://github.com/jenkinsci" id="ji-fork-tag">
<img alt="Fork us on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" style="position: absolute; top: 0; right: 0; border: 0;">
</a>
</div>

<!-- ending partial toptoolbar.html.haml -->
<div class="container">
<div class="row body">
<div class="section_nav pagination-links">
<a class="prev page-link" href="../jenkinsfile">
⇐ The Jenkinsfile
</a>
<a class="up page-link" href="../">
⇑ "Pipeline
</a>
<a class="next page-link" href="../shared-libraries">
Shared Libraries ⇒
</a>
<br>
<a class="index page-link" href="../../">
Index
</a>
</div>
<div class="section">
<h1>
Multibranch Pipelines
</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#making-pull-requests">Making Pull Requests</a></li>
<li><a href="#using-organization-folders">Using Organization Folders</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>Multibranch Pipeline</strong> project type enables you to configure different jobs
for different branches of the same project. In a multibranch pipeline
configuration, Jenkins automatically discovers, manages, and executes jobs
for multiple source repositories and branches. This eliminates the need for
manual job creation and management, as would otherwise be necessary
when, for example, a developer adds a new feature to an existing
product.</p>
</div>
<div class="paragraph">
<p>A multibranch pipeline project always includes a <em>Jenkinsfile</em> in its
repository root. Jenkins automatically creates a sub-project for each branch
that it finds in a repository with a <code>Jenkinsfile</code>.</p>
</div>
<div class="paragraph">
<p>Multibranch pipelines use the same version control as the rest of your software
development process. This "pipeline as code" approach has the following
advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can modify pipeline code without special editing permissions.</p>
</li>
<li>
<p>Finding out who changed what and why no longer depends on whether developers remember to comment their code changes in configuration files.</p>
</li>
<li>
<p>Version control makes the history of changes to code readily apparent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create a Multibranch Pipeline:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click New Item on your Jenkins home page, enter a name for your job, select Multibranch Pipeline, and click OK.</p>
</li>
<li>
<p>Configure your SCM source (options include Git, GitHub, Mercurial, Subversion, and Bitbucket), supplying information about the owner, scan credentials, and repository in appropriate fields.
For example, if you select Git as the branch source, you are prompted for the usual connection information, but then rather than enter a fixed refspec (Git&#8217;s name for a source/destination pair), you would enter a branch name pattern (Use default settings to look for any branch).</p>
</li>
<li>
<p>Configure the other multibranch pipeline options:</p>
<div class="ulist">
<ul>
<li>
<p>API endpoint - an alternate API endpoint to use a self-hosted GitHub Enterprise</p>
</li>
<li>
<p>Checkout credentials - alternate credentials to use when checking out the code (cloning)</p>
</li>
<li>
<p>Include branches - a regular expression to specify branches to include</p>
</li>
<li>
<p>Exclude branches - a regular expression to specify branches to exclude; note that this will takes precedence over the contents of include expressions</p>
</li>
</ul>
</div>
</li>
<li>
<p>Save your configuration.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Jenkins automatically scans the designated repository and creates appropriate branches.</p>
</div>
<div class="paragraph">
<p>For example (again in Git), if you started with a master branch, and then wanted
to experiment with some changes, and so did <code>git checkout -b newfeature</code> and
pushed some commits, Jenkins would automatically detect the new branch in your
repository and create a new sub-project for it. That sub-project would have its
own build history unrelated to the trunk (main line).</p>
</div>
<div class="paragraph">
<p>If you choose, you can ask for the sub-project to be automatically removed after
its branch is merged with the main line and deleted. To change your Pipeline
script—for example, to add a new Jenkins publisher step corresponding to new
reports that your <code>Makefile</code>/<code>pom.xml</code>/etc. is creating—you edit the appropriate
<code>Jenkinsfile</code>. Your Pipeline script is always synchronized with
the rest of the source code you are working on.</p>
</div>
<div class="paragraph">
<p><strong>Multibranch Pipeline</strong> projects expose the name of the branch being built with
the <code>BRANCH_NAME</code> environment variable. In multibranch pipelines, the <code>checkout
scm</code> step checks out the specific commit that the <code>Jenkinsfile</code> originated, so
as to maintain branch integrity.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="making-pull-requests"><a class="anchor" href="#making-pull-requests"></a>Making Pull Requests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A pull request notifies the person responsible for maintaining a Jenkins
repository that you have a change or change set that you want to see merged into
the main branch associated with that repository. Each individual change is
called a "commit."</p>
</div>
<div class="paragraph">
<p>You make pull requests from a command line, or by selecting the appropriately
labeled button (typically "Pull" or "Create Pull Request") in the interface for
your source code management system.</p>
</div>
<div class="paragraph">
<p>A pull request to a repository included in or monitored by an Organization
Folder can be used to automatically execute a multibranch pipeline build.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-organization-folders"><a class="anchor" href="#using-organization-folders"></a>Using Organization Folders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Organization folders enable Jenkins to automatically detect and include any new
repositories within them as resources.</p>
</div>
<div class="paragraph">
<p>When you create a new repository (as might be the case for a new project), that
repository has a <code>Jenkinsfile</code>. If you also configure one or more organization
folders, Jenkins automatically detects any repository in an organization folder,
scans the contents of that repository at either default or configurable
intervals, and creates a Multibranch Pipeline project for what it finds in the
scan. An organization folder functions as a "parent," and any item within it is
treated as a "child" of that parent.</p>
</div>
<div class="paragraph">
<p>Organization folders alleviate the need to manually create projects for new
repositories. When you use organization folders, Jenkins views your repositories
as a hierarchy, and each repository (organization folder) may optionally have
child elements such as branches or pull requests.</p>
</div>
<div class="paragraph">
<p>To create Organization folders:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open Jenkins in your web browser.</p>
</li>
<li>
<p>Go to: New Item → GitHub Organization or New Item → Bitbucket Team.</p>
</li>
<li>
<p>Follow the configuration steps, making sure to specify appropriate scan
credentials and a specific owner for the GitHub Organization or Bitbucket Team
name.</p>
</li>
<li>
<p>Set build triggers by selecting the checkbox associated with the trigger type
you want. Folder scans and the pipeline builds associated with those scans can
be initiated by command scripts or performed at defined intervals. They can also
triggered by project promotion or changes to the images in a monitored Docker
hub.</p>
</li>
<li>
<p>Decide whether to automatically remove or retain unused items. "Orphaned Item
Strategy" fields in the configuration interface let you specify how many days to
keep old items, and how many old items to keep. If you enter no values in these
fields, unused items are removed by default.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While configuring organization folders, you can set the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Repository name pattern - a regular expression to specify which repositories are included in scans</p>
</li>
<li>
<p>API endpoint - an alternate API endpoint to use a self-hosted GitHub Enterprise</p>
</li>
<li>
<p>Checkout credentials - alternate credentials to use when checking out (cloning) code</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Multibranch Pipeline projects and Organization Folders are examples of
"computed folder" functionality. In Multibranch Pipeline projects, computation
creates child items for eligible branches. In Organization folders, computation
populates child items as individual Multibranch Pipelines for scanned
repositories.</p>
</div>
<div class="paragraph">
<p>Select the "Folder Computation" section of your Jenkins interface to see the
duration (in seconds) and result (success or failure) of computation operations,
or to access a Folder Computation Log that provides more detail about this
activity.</p>
</div>
</div>
</div>
</div>
<div class="section_nav pagination-links">
<a class="prev page-link" href="../jenkinsfile">
⇐ The Jenkinsfile
</a>
<a class="up page-link" href="../">
⇑ "Pipeline
</a>
<a class="next page-link" href="../shared-libraries">
Shared Libraries ⇒
</a>
<br>
<a class="index page-link" href="../../">
Index
</a>
</div>
</div>
</div>


<footer id="footer">
<div class="container">
<div class="row">
<div class="links col-lg-8 col-md-12 col-sm-12">
<ul class="major-areas">
<li class="area solo col-md-3 col-sm-6 col-xs-6">
<div class="div-mar">
<h5>Resources</h5>
<ul class="resources">
<li>
<a href="/content/event-calendar">
Events
</a>
</li>
<li>
<a href="/doc">
Documentation
</a>
</li>
<li>
<a href="/node">
Blog
</a>
</li>
</ul>
</div>
</li>
<li class="area multi col-md-3 col-sm-6 col-xs-6">
<div class="div-mar">
<h5>Solutions</h5>
<ul>
<li>
<a href="/solutions/android">
Android
</a>
</li>
<li>
<a href="/solutions/c">
C/C++
</a>
</li>
<li>
<a href="/solutions/docker">
Docker
</a>
</li>
<li>
<a href="/solutions/embedded">
Embedded
</a>
</li>
<li>
<a href="/solutions/github">
GitHub
</a>
</li>
<li>
<a href="/solutions/java">
Java
</a>
</li>
<li>
<a href="/solutions/pipeline">
Continuous Delivery
</a>
</li>
<li>
<a href="/solutions/python">
Python
</a>
</li>
<li>
<a href="/solutions/ruby">
Ruby
</a>
</li>
</ul>
</div>
</li>
<li class="area multi col-md-3 col-sm-6 col-xs-6">
<div class="div-mar">
<h5>Project</h5>
<ul class="project">
<li>
<a href="https://issues.jenkins-ci.org">
Issue tracker
</a>
</li>
<li>
<a href="https://wiki.jenkins-ci.org">
Wiki
</a>
</li>
<li>
<a href="https://github.com/jenkinsci">
GitHub
</a>
</li>
<li>
<a href="https://ci.jenkins.io">
Jenkins on Jenkins
</a>
</li>
</ul>
</div>
</li>
<li class="area multi col-md-3 col-sm-6 col-xs-6">
<div class="div-mar">
<h5>Community</h5>
<ul class="community">
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-users">
Users mailing list
</a>
</li>
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-dev">
Developers mailing list
</a>
</li>
<li>
<a href="https://twitter.com/jenkinsci">
Twitter
</a>
</li>
<li>
<a href="https://reddit.com/r/jenkinsci">
Reddit
</a>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 footer-left">
<p class="box">
<a href="https://github.com/jenkins-infra/jenkins.io/edit/master/content//doc/book/pipeline/multibranch.adoc" title="Edit /doc/book/pipeline/multibranch.adoc on GitHub">
Improve this page
</a>
|
<a href="https://github.com/jenkins-infra/jenkins.io/commits/master/content//doc/book/pipeline/multibranch.adoc" title="View /doc/book/pipeline/multibranch.adoc history on GitHub">
Page history
</a>
</p>
<div class="license-box">
<div id="creativecommons">
<a href="https://creativecommons.org/licenses/by-sa/4.0/">
<p>
<img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
</p>
</a>
<p>
The content driving this site is licensed under the Creative Commons Attribution-ShareAlike 4.0 license.
</p>
</div>
</div>
</div>
</div>
</div>
</footer>
<!-- starting partial footer.html.haml -->
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-4216293-5', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  !function(d,s,id) {
    var js, fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
</script>

<!-- ending partial footer.html.haml -->
</body>
</html>
