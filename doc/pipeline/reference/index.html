<!DOCTYPE html>
<html>
<head>
<title>
Syntax Reference
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins is an open source automation server" name="description">
<link href="/sites/default/files/jenkins_favicon.ico" rel="shortcut icon" type="image/x-icon">
<!-- starting partial scriptlinks.html.haml -->
<link href="http://localhost:4242/css/font-awesome.min.css" media="screen" rel="stylesheet">
<link href="http://localhost:4242/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="http://localhost:4242/assets/bower/ekko-lightbox/ekko-lightbox.min.css" media="screen" rel="stylesheet">
<link href="http://localhost:4242/assets/bower/tether/css/tether.min.css" media="screen" rel="stylesheet">
<link href="http://localhost:4242/css/font-icons.css" media="screen" rel="stylesheet">
<link href="http://localhost:4242/css/jenkins.css" media="screen" rel="stylesheet">
<script src="http://localhost:4242/assets/bower/jquery/jquery.min.js"></script>
<script src="http://localhost:4242/assets/bower/tether/js/tether.min.js"></script>
<script src="http://localhost:4242/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<script src="http://localhost:4242/assets/bower/ekko-lightbox/ekko-lightbox.min.js"></script>

<!-- ending partial scriptlinks.html.haml -->
</head>
<body>
<!-- starting partial toptoolbar.html.haml -->
<script>
  $(function () {
    $(document).delegate('*[data-toggle="lightbox"]', 'click', function(event) {
      event.preventDefault();
      $(this).ekkoLightbox();
    });
  })
</script>
<div id="ji-hover-layer"></div>
<div class="ji-toolbar-offset"></div>
<div class="fixed top">
<nav class="navbar navbar-dark bg-inverse" id="ji-toolbar">
<a class="fixed navbar-brand" href="http://localhost:4242" id="home-logo">
Jenkins
</a>
<ul class="nav navbar-nav">
<li class="nav-item fixed">
<div class="btn-group" id="download-menu">
<a aria-expanded="false" aria-haspopup="true" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
Downloads
</a>
<!-- starting partial downloadlist.html.haml -->
<div class="dropdown-menu">
<div class="row">
<div class="col-md-6 text-xs-center">
<h3>
LTS Release
</h3>
<p>
LTS (Long-Term Support) releases are chosen every 12 weeks from the
stream of regular releases as the stable release for that time period.
<a href="https://wiki.jenkins-ci.org/display/JENKINS/LTS+Release+Line">
Learn moreâ€¦
</a>
</p>
</div>
<div class="col-md-6 text-xs-center">
<h3>
Weekly Release
</h3>
<p>
A new release is produced weekly to deliver bug fixes and features to
users and plugin developers.
</p>
</div>
</div>
<div class="row">
<div class="col-md-6 text-xs-center">
<div class="btn-group">
<a class="btn btn-primary chromeOnly" href="http://mirrors.jenkins.io/war-stable/latest/jenkins.war">
<i class="icon-box-add"></i>
2.32.1
.war
</a>
<button aria-expanded="false" aria-haspopup="true" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" data-trigger="hover"></button>
<div class="dropdown-menu">
<a class="dropdown-item" href="https://registry.hub.docker.com/_/jenkins/">
<span class="icon"></span>
<span class="title">
Docker
</span>
</a>
<a class="dropdown-item" href="http://www.freshports.org/devel/jenkins-lts">
<span class="icon"></span>
<span class="title">
FreeBSD
</span>
</a>
<a class="dropdown-item" href="https://packages.gentoo.org/packages/dev-util/jenkins-bin">
<span class="icon"></span>
<span class="title">
Gentoo
</span>
</a>
<a class="dropdown-item" href="/content/thank-you-downloading-os-x-installer#stable">
<span class="icon"></span>
<span class="title">
Mac OS X
</span>
</a>
<a class="dropdown-item" href="http://openports.se/devel/jenkins/stable">
<span class="icon"></span>
<span class="title">
OpenBSD
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/opensuse-stable/">
<span class="icon"></span>
<span class="title">
openSUSE
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/redhat-stable/">
<span class="icon"></span>
<span class="title">
Red Hat/Fedora/CentOS
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/debian-stable/">
<span class="icon"></span>
<span class="title">
Ubuntu/Debian
</span>
</a>
<a class="dropdown-item" href="/content/thank-you-downloading-windows-installer#stable">
<span class="icon"></span>
<span class="title">
Windows
</span>
</a>
</div>
</div>
<p class="details">
<a class="item" href="/changelog-stable">Changelog</a>
|
<a class="item" href="/doc/upgrade-guide">Upgrade Guide</a>
|
<a class="item" href="http://mirrors.jenkins.io/war-stable/">Past Releases</a>
</p>
</div>
<div class="col-md-6 text-xs-center">
<div class="btn-group">
<a class="btn btn-primary chromeOnly" href="http://mirrors.jenkins.io/war/latest/jenkins.war">
<i class="icon-box-add"></i>
2.42
.war
</a>
<button aria-expanded="false" aria-haspopup="true" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" data-trigger="hover"></button>
<div class="dropdown-menu">
<a class="dropdown-item" href="https://registry.hub.docker.com/u/jenkinsci/jenkins/">
<span class="icon"></span>
<span class="title">
Docker
</span>
</a>
<a class="dropdown-item" href="http://www.freshports.org/devel/jenkins">
<span class="icon"></span>
<span class="title">
FreeBSD
</span>
</a>
<a class="dropdown-item" href="https://packages.gentoo.org/packages/dev-util/jenkins-bin">
<span class="icon"></span>
<span class="title">
Gentoo
</span>
</a>
<a class="dropdown-item" href="/content/thank-you-downloading-os-x-installer">
<span class="icon"></span>
<span class="title">
Mac OS X
</span>
</a>
<a class="dropdown-item" href="http://openports.se/devel/jenkins/devel">
<span class="icon"></span>
<span class="title">
OpenBSD
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/opensuse/">
<span class="icon"></span>
<span class="title">
openSUSE
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/redhat/">
<span class="icon"></span>
<span class="title">
Red Hat/Fedora/CentOS
</span>
</a>
<a class="dropdown-item" href="https://pkg.jenkins.io/debian/">
<span class="icon"></span>
<span class="title">
Ubuntu/Debian
</span>
</a>
<a class="dropdown-item" href="/content/thank-you-downloading-windows-installer">
<span class="icon"></span>
<span class="title">
Windows
</span>
</a>
</div>
</div>
<p class="details">
<a class="item" href="/changelog">Changelog</a>
|
<a class="item" href="http://mirrors.jenkins.io/war/">Past Releases</a>
</p>
</div>
</div>
</div>

<!-- ending partial downloadlist.html.haml -->
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="http://localhost:4242/node">
Blog
</a>
</li>
<li class="active nav-item">
<a class="nav-link" href="http://localhost:4242/doc">
Documentation
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">
Use-cases
</a>
<div class="dropdown-menu">
<a class="dropdown-item feature" href="http://localhost:4242/solutions/android">
Android
</a>
<a class="dropdown-item feature" href="http://localhost:4242/solutions/c">
C/C++
</a>
<a class="dropdown-item feature" href="http://localhost:4242/solutions/docker">
Docker
</a>
<a class="dropdown-item feature" href="http://localhost:4242/solutions/embedded">
Embedded
</a>
<a class="dropdown-item feature" href="http://localhost:4242/solutions/github">
GitHub
</a>
<a class="dropdown-item feature" href="http://localhost:4242/solutions/java">
Java
</a>
<a class="dropdown-item feature" href="http://localhost:4242/solutions/pipeline">
Continuous Delivery
</a>
<a class="dropdown-item feature" href="http://localhost:4242/solutions/python">
Python
</a>
<a class="dropdown-item feature" href="http://localhost:4242/solutions/ruby">
Ruby
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="http://localhost:4242/participate">
Participate
</a>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="/projects" role="button">
Sub-projects
</a>
<div class="dropdown-menu">
<a class="dropdown-item feature" href="http://localhost:4242/projects/">
Overview
</a>
<a class="dropdown-item feature" href="/projects/blueocean/">
Blue Ocean
</a>
<a class="dropdown-item feature" href="/projects/gsoc/">
Google Summer of Code
</a>
<a class="dropdown-item feature" href="/projects/infrastructure/">
Infrastructure
</a>
<a class="dropdown-item feature" href="/projects/jam/">
Jenkins Area Meetups
</a>
</div>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">
Resources
</a>
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://accounts.jenkins.io/" title="Create/manage your account for accessing wiki, issue tracker, etc">
Account Management
</a>
<a class="dropdown-item" href="http://localhost:4242/content/chat" title="Chat with the rest of the Jenkins community on IRC">
Chat
</a>
<a class="dropdown-item feature" href="https://issues.jenkins-ci.org/">
Issue Tracker
</a>
<a class="dropdown-item" href="http://localhost:4242/content/mailing-lists" title="Browse Jenkins mailing list archives and/or subscribe to lists">
Mailing Lists
</a>
<a class="dropdown-item feature" href="https://wiki.jenkins-ci.org/">
Wiki
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="http://localhost:4242/security">
Security
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="http://localhost:4242/press">
Press
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="http://localhost:4242/conduct">
Conduct
</a>
</li>
</ul>
</nav>
</div>
<div id="ji-top-peg">
<a href="https://github.com/jenkinsci" id="ji-fork-tag">
<img alt="Fork us on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" style="position: absolute; top: 0; right: 0; border: 0;">
</a>
</div>

<!-- ending partial toptoolbar.html.haml -->
<div class="container">
<div class="row">
<div class="col-lg-3">
<div class="sidebar-nav tour">
<h4>
Guided Tour
</h4>
<ul>
<li>
<a href="http://localhost:4242/doc" class="">Index</a>
</li>
<li>
<a href="http://localhost:4242/doc/pipeline/tour/hello-world" class="">Create your first Pipeline</a>
</li>
<li>
<a href="http://localhost:4242/doc/pipeline/tour/running-multiple-steps" class="">Running multiple steps</a>
</li>
<li>
<a href="http://localhost:4242/doc/pipeline/tour/agents" class="">Defining execution environments</a>
</li>
<li>
<a href="http://localhost:4242/doc/pipeline/tour/environment" class="">Using environment variables</a>
</li>
<li>
<a href="http://localhost:4242/doc/pipeline/tour/tests-and-artifacts" class="">Recording test results and artifacts</a>
</li>
<li>
<a href="http://localhost:4242/doc/pipeline/tour/post" class="">Cleaning up and notifications</a>
</li>
<li>
<a href="http://localhost:4242/doc/pipeline/tour/deployment" class="">Deployment</a>
</li>
</ul>
<h4>
User Handbook
<span style="font-size: 0.6rem; vertical-align: middle;">
<a href="../user-handbook.pdf">
(PDF)
</a>
</span>
</h4>
<ul>
<li>
<a href="http://localhost:4242/doc/book/getting-started" class="">Getting Started with Jenkins</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/using" class="">Using Jenkins</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/managing" class="">Managing Jenkins</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/best-practice" class="">Best Practices</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/pipeline" class="">Pipeline</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/use-case" class="">Jenkins Use-Cases</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/operating" class="">Operating Jenkins</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/scaling" class="">Scaling Jenkins</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/appendix" class="">Appendix</a>
</li>
<li>
<a href="http://localhost:4242/doc/book/glossary" class="">Glossary</a>
</li>
</ul>
<h4>
Resources
</h4>
<ul>
<li>
<a href="http://localhost:4242/doc/pipeline/reference" class="active">Pipeline Syntax reference</a>
</li>
<li>
<a href="http://localhost:4242/doc/pipeline/steps" class="">Pipeline Steps reference</a>
</li>
</ul>
<h5>
Recent Tutorials
</h5>
<ul>
<li>
<a href="/blog/2016/08/29/sauce-pipeline/">
Browser-testing with Sauce OnDemand and Pipeline
</a>
</li>
<li>
<a href="/blog/2016/08/10/rails-cd-with-pipeline/">
Continuous Security for Rails apps with Pipeline and Brakeman
</a>
</li>
<li>
<a href="/blog/2016/07/18/pipline-notifications/">
Sending Notifications in Pipeline
</a>
</li>
</ul>
<div class="small">
<a href="/node/tags/tutorial">
View all tutorials
</a>
</div>
<hr>
<h4>
Developers
</h4>
<h5>
Writing plugins
</h5>
<ul>
<li>
<a href="https://wiki.jenkins-ci.org/display/JENKINS/Extend+Jenkins">
Extend Jenkins
</a>
</li>
<li>
<a href="https://wiki.jenkins-ci.org/display/JENKINS/Extension+points">
Extension points
</a>
</li>
</ul>
<h5>
JavaDoc
</h5>
<ul>
<li>
<a href="http://javadoc.jenkins.io/">
Latest
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-2.32">
2.32
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-2.19">
2.19
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-2.7">
2.7
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-1.651">
1.651
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-1.642">
1.642
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-1.625">
1.625
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-1.609">
1.609
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-1.596">
1.596
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-1.580">
1.580
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-1.565">
1.565
</a>
</li>
<li>
<a href="http://javadoc.jenkins.io/archive/jenkins-1.554">
1.554
</a>
</li>
</ul>
</div>
</div>
<div class="col-lg-9">
<h1>
Syntax Reference
</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#pipeline">pipeline</a></li>
<li><a href="#within-pipeline">Within <code>pipeline</code></a>
<ul class="sectlevel2">
<li><a href="#agent">agent</a></li>
<li><a href="#environment">environment</a></li>
<li><a href="#stages">stages</a></li>
<li><a href="#stage">stage</a></li>
<li><a href="#when">when</a></li>
<li><a href="#script">script</a></li>
<li><a href="#tools">tools</a></li>
<li><a href="#post">post</a></li>
<li><a href="#build-conditions">Build Conditions</a></li>
<li><a href="#triggers">Triggers</a></li>
<li><a href="#build-parameters">Build Parameters</a></li>
<li><a href="#options">Options</a></li>
<li><a href="#declarative-subset-of-groovy">Declarative Subset of Groovy</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This section covers the syntax for Declarative Pipeline.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pipeline"><a class="anchor" href="#pipeline"></a>pipeline</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: Top level step, containing a closure with the model
configuration inside it.</p>
</li>
<li>
<p><em>Parameters</em>: none</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes.</p>
</li>
<li>
<p><em>Closure Contents</em>: See below.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="within-pipeline"><a class="anchor" href="#within-pipeline"></a>Within <code>pipeline</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>These are sections that are specified directly within the <code>pipeline</code>
argument closure.</p>
</div>
<div class="sect2">
<h3 id="agent"><a class="anchor" href="#agent"></a>agent</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: Specifies where the build or stage will run.</p>
</li>
<li>
<p><em>Required</em>: Yes for the top-level <code>pipeline</code> closure, optional for
individual <code>stage</code> closures.</p>
</li>
<li>
<p><em>Allowed In</em>: Top-level <code>pipeline</code> closure and individual <code>stage</code>
closures.</p>
</li>
<li>
<p><em>Parameters</em>: Either a <code>Closure</code> of one key and either a single value
or a <code>Closure</code> of multiple configuration pairs, or one of two constants</p>
<div class="ulist">
<ul>
<li>
<p><code>none</code> or <code>any</code>.</p>
<div class="ulist">
<ul>
<li>
<p><em>Map Keys</em>:</p>
<div class="ulist">
<ul>
<li>
<p>Note that this will be an <code>ExtensionPoint</code>, so plugins will be able
to add to the available image providers.</p>
</li>
<li>
<p><code>docker</code></p>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: If given, uses this Docker image for the container
the build will run in. If no <code>label</code> is given, the container will be run
within a simple <code>node { ... }</code> block.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>dockerfile</code></p>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: If given, builds from the Dockerfile in the
repository and runs in a container using the resulting image.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>label</code></p>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: If given, uses this label for the node the build
will run on - if <code>docker</code> is also specified, the container will run on
that node.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>none</code></p>
<div class="ulist">
<ul>
<li>
<p><em>Type</em>: bareword</p>
</li>
<li>
<p><em>Description</em>: If given, node/image management will need to be
specified explicitly in stages and no automatic <code>checkout scm</code> call will
occur.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>any</code></p>
<div class="ulist">
<ul>
<li>
<p><em>Type</em>: bareword</p>
</li>
<li>
<p><em>Description</em>: If given, any available agent will be used.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><em>Takes a Closure</em>: yes</p>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">agent {
    label <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">hi-speed</span><span style="color:#710">'</span></span>
}</code></pre>
</div></div></div>
<div class="pipeline-block"></div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">agent {
    docker {
        image <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ubuntu:lts</span><span style="color:#710">'</span></span>
        label <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">has-docker</span><span style="color:#710">'</span></span>
        args <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">-v /tmp:/tmp -p 80:80</span><span style="color:#710">&quot;</span></span>
    }
}</code></pre>
</div></div></div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">agent none</code></pre>
</div></div></div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">agent any</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="environment"><a class="anchor" href="#environment"></a>environment</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: A sequence of <code>key = value</code> pairs, which will be passed
to the <code>withEnv</code> step the build will be executed within.</p>
</li>
<li>
<p><em>Required</em>: No</p>
</li>
<li>
<p><em>Allowed In</em>: Top-level <code>pipeline</code> or <code>stage</code> closures only.</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: One or more lines with <code>foo = 'bar'</code> variable
name/value pairs.</p>
<div class="ulist">
<ul>
<li>
<p>The name doesn&#8217;t need to be quoted.</p>
</li>
<li>
<p>Bind credentials using the "credentials(<em>&lt;id&gt;</em>)" function. <em>NOTE</em>:
credentials binding requires that the pipeline or stage is running
within an agent. In the example below the credentials gets bound in
slightly different ways depending of the type of the key;</p>
<div class="ulist">
<ul>
<li>
<p>If it is a <code>Secret Text</code> the variable <code>SAUCE_ACCESS</code> will contain
that text.</p>
</li>
<li>
<p>If it is a <code>Secret File</code> the variable <code>SAUCE_ACCESS</code> will contain a
path to the file on the build agent.</p>
</li>
<li>
<p>If it is a <code>Standard username and password</code> credential, three
variables will be added to the environment:</p>
<div class="ulist">
<ul>
<li>
<p><code>SAUCE_ACCESS</code> containing <em>&lt;username&gt;:&lt;password&gt;</em></p>
</li>
<li>
<p><code>SAUCE_ACCESS_USR</code> containing the username</p>
</li>
<li>
<p><code>SAUCE_ACCESS_PSW</code> containing the password</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">environment {
   CXX          = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">g++-4.8</span><span style="color:#710">'</span></span>
   SAUCE_ACCESS = credentials(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">sauce-lab-dev</span><span style="color:#710">'</span></span>)
   someVar      = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">someValue</span><span style="color:#710">'</span></span>
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="stages"><a class="anchor" href="#stages"></a>stages</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: A sequence of one or more Pipeline <code>stage</code>, each of
which consists of a sequence of steps.</p>
</li>
<li>
<p><em>Required</em>: Yes</p>
</li>
<li>
<p><em>Allowed In</em>: Top-level <code>pipeline</code> closure only.</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: one or more <code>stage</code> blocks, as described below.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="stage"><a class="anchor" href="#stage"></a>stage</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: A block for a single <code>stage</code>, containing a sequence of
steps. Note that this syntax matches up with the to-be-released
block-scoped <code>stage</code> syntax in base Pipeline.</p>
</li>
<li>
<p><em>Required</em>: At least one is required.</p>
</li>
<li>
<p><em>Parameters</em>: A single <code>String</code>, the name for the <code>stage</code>.</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>:</p>
<div class="ulist">
<ul>
<li>
<p>A <code>steps</code> block containing one or more Pipeline steps, including
block-scoped steps and the special <code>script</code> block described below, and
optionally, certain configuration sections that allow being set on a
per-stage basis.</p>
<div class="ulist">
<ul>
<li>
<p><em>NOTE</em>: Only the "declarative subset" of Groovy is allowed by
default. See below for details on that subset.</p>
</li>
<li>
<p><em>NOTE</em>: The <code>parallel</code> step is a special case - it can only be used
if it&#8217;s the sole step in the <code>stage</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>An <code>agent</code> section can be configured per-stage, see above.</p>
</li>
<li>
<p>An optional <code>when</code> block specifying if the stage should run or not.
It can contain arbitrary Groovy code, but needs to return <code>true</code> if the
stage should run or <code>false</code> if not.</p>
</li>
<li>
<p>An optional <code>post</code> block that runs after the steps in the stage. See
<code>post</code> below.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">stages {
    stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">foo</span><span style="color:#710">'</span></span>) {
        steps {
            echo <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">bar</span><span style="color:#710">'</span></span>
        }
    }
}</code></pre>
</div></div></div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">stages {
    stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">first</span><span style="color:#710">'</span></span>) {
        steps {
            timeout(<span style="color:#606">time</span>:<span style="color:#00D">5</span>, <span style="color:#606">unit</span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">MINUTES</span><span style="color:#710">'</span></span>) {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mvn clean install -DskipTests</span><span style="color:#710">&quot;</span></span>
            }
        }
    }

    stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">second</span><span style="color:#710">'</span></span>) {
        agent {
            label <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">some-node</span><span style="color:#710">'</span></span>
        }
        when {
            branch <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">master</span><span style="color:#710">&quot;</span></span>
        }
        steps {
            checkout scm
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mvn clean install</span><span style="color:#710">&quot;</span></span>
        }
        post {
            always {
                email <span style="color:#606">recipient</span>: [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">one@example.com</span><span style="color:#710">'</span></span>,<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">two@example.com</span><span style="color:#710">'</span></span>], <span style="color:#606">subject</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Master Build complete</span><span style="color:#710">&quot;</span></span>, <span style="color:#606">body</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Your build has completed</span><span style="color:#710">&quot;</span></span>
            }
            failure {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bash ./cleanup-from-failure.sh</span><span style="color:#710">&quot;</span></span>
            }
        }
    }
}</code></pre>
</div></div></div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">stages {
    stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">parallel-stage</span><span style="color:#710">'</span></span>) {
        steps {
            parallel(
                <span style="color:#606">firstBlock</span>: {
                    echo <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">First block of the parallel</span><span style="color:#710">&quot;</span></span>
                },
                <span style="color:#606">secondBlock</span>: {
                    echo <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Second block of the parallel</span><span style="color:#710">&quot;</span></span>
                }
            )
        }
    }
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="when"><a class="anchor" href="#when"></a>when</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: A block within a <code>stage</code> that determines whether the
stage should be executed.</p>
</li>
<li>
<p><em>Required</em>: No</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: One or more of the possible <code>when</code> conditions,
provided by an extension point.</p>
<div class="ulist">
<ul>
<li>
<p><em>Built-In <code>when</code> Conditions</em>:</p>
<div class="ulist">
<ul>
<li>
<p><code>branch</code> - run when the branch being built matches the branch
pattern given.</p>
</li>
<li>
<p><code>environment</code> - run when the environment contains a given
environment variable with a given value.</p>
</li>
<li>
<p><code>expression</code> - run when an arbitrary Groovy expression returning a
boolean is true.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">when { branch <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">*/master</span><span style="color:#710">&quot;</span></span> }</code></pre>
</div></div></div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">when { environment <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">FOO</span><span style="color:#710">&quot;</span></span>, <span style="color:#606">value</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SOME_OTHER_VALUE</span><span style="color:#710">&quot;</span></span> }</code></pre>
</div></div></div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">when { expression { <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span> == <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bar</span><span style="color:#710">&quot;</span></span> } }</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="script"><a class="anchor" href="#script"></a>script</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: A block within <code>steps</code> or <code>post</code> that can contain
Pipeline code not subject to the "declarative" subset described below.</p>
</li>
<li>
<p><em>Required</em>: No</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: Any valid Pipeline code.</p>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">image <span style="color:#606">docker</span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">java:7</span><span style="color:#710">'</span></span>
stages {
    stage <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">build</span><span style="color:#710">'</span></span> {
        steps {
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mvn install</span><span style="color:#710">'</span></span>
            script {
                <span style="color:#777">// any valid Pipeline Script goes here</span>
                <span style="color:#080;font-weight:bold">def</span> browsers = [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ie</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">chrome</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">safari</span><span style="color:#710">&quot;</span></span>]
                <span style="color:#080;font-weight:bold">for</span> (<span style="color:#339;font-weight:bold">int</span> i = <span style="color:#00D">0</span>; i &lt; browsers.size(); i++) {
                    <span style="color:#080;font-weight:bold">def</span> browser = browsers.get(i)
                    sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./test.sh </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>browser<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
                }
            }
        }
    }
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="tools"><a class="anchor" href="#tools"></a>tools</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: A section defining tools to auto-install and put on the
PATH. This is ignored if <code>image none</code> is specified.</p>
</li>
<li>
<p><em>Required</em>: No</p>
</li>
<li>
<p><em>Allowed In</em>: Top-level <code>pipeline</code> or <code>stage</code> closures only.</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: Names and versions of tools configured in Jenkins
to install.</p>
<div class="ulist">
<ul>
<li>
<p>Tool names are aliases to the <code>ToolDescriptor</code> class for that tool,
and must be one of a list of pre-configured possible tools. Currently
that&#8217;s hardwired to just <code>maven</code>, <code>java</code>, and <code>gradle</code>, but this will be
changed to be an extensible system. The tool (and its version) must
already be configured on the Jenkins master in use.</p>
</li>
<li>
<p>Tool versions are the names for specific tool installations
configured in Jenkins.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">tools {
    maven <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">apache-maven-3.0.1</span><span style="color:#710">&quot;</span></span>
    java <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">JDK 1.8</span><span style="color:#710">&quot;</span></span>
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="post"><a class="anchor" href="#post"></a>post</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: Defines post-build actions to be run after build
completion, assuming build status conditions are met.</p>
</li>
<li>
<p><em>Required</em>: No</p>
</li>
<li>
<p><em>Allowed In</em>: Top-level <code>pipeline</code> closure only.</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: A sequence of one or more build conditions
containing Pipeline steps to run. See below for definition of build
conditions and their contents.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="build-conditions"><a class="anchor" href="#build-conditions"></a>Build Conditions</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: Closures named for a particular build condition,
containing Pipeline steps to run if that condition is met.</p>
</li>
<li>
<p><em>Required</em>: One or more required in <code>post</code> if it exists.</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Possible Condition Names</em>:</p>
<div class="ulist">
<ul>
<li>
<p>Currently hardcoded, but will be changed to be extensible.</p>
</li>
<li>
<p><code>always</code>: Run regardless of build status.</p>
</li>
<li>
<p><code>aborted</code>: Run if build is aborted - note that this may not actually
work.</p>
</li>
<li>
<p><code>success</code>: Run if the build is successful (or more accurately, if the
build result hasn&#8217;t been set to anything else).</p>
</li>
<li>
<p><code>unstable</code>: Run if the build result is unstable.</p>
</li>
<li>
<p><code>failure</code>: Run if the build failed.</p>
</li>
<li>
<p><code>changed</code>: Run if the build&#8217;s result is different from the previous
build&#8217;s result.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: A sequence of Pipeline steps, such as could be
included in a <code>stage</code>. Runs in an unspecified <code>node { ... }</code> block if
<code>image none</code> was specified.</p>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">post {
    always {
        email <span style="color:#606">recipient</span>: [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">one@example.com</span><span style="color:#710">'</span></span>,<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">two@example.com</span><span style="color:#710">'</span></span>], <span style="color:#606">subject</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Build complete</span><span style="color:#710">&quot;</span></span>, <span style="color:#606">body</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Your build has completed</span><span style="color:#710">&quot;</span></span>
    }
    failure {
        sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bash ./cleanup-from-failure.sh</span><span style="color:#710">&quot;</span></span>
    }
    success {
        sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">git push origin master</span><span style="color:#710">&quot;</span></span>
    }
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="triggers"><a class="anchor" href="#triggers"></a>Triggers</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: Triggers for this job, as used in other Jenkins jobs.</p>
</li>
<li>
<p><em>Required</em>: No</p>
</li>
<li>
<p><em>Allowed In</em>: Top-level <code>pipeline</code> closure only.</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: A sequence of one or more trigger configurations,
using <code>@Symbol</code> names for constructors.</p>
<div class="ulist">
<ul>
<li>
<p>Note that <code>[$class: 'Foo', arg1: 'something', ...]</code> syntax can not be
used, only <code>cron('@daily')</code> and the like.</p>
</li>
<li>
<p>Also note that the <code>SCMTrigger</code> won&#8217;t work with the <code>scm</code> <code>@Symbol</code> -
with Jenkins 2.22 or later, the <code>pollScm</code> symbol does work.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">triggers {
    cron(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">@daily</span><span style="color:#710">'</span></span>)
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="build-parameters"><a class="anchor" href="#build-parameters"></a>Build Parameters</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: Build parameters that will be prompted for at build
time.</p>
</li>
<li>
<p><em>Required</em>: No</p>
</li>
<li>
<p><em>Allowed In</em>: Top-level <code>pipeline</code> closure only.</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: A sequence of one or more parameter definition
configurations, using <code>@Symbol</code> names for constructors.</p>
<div class="ulist">
<ul>
<li>
<p>Note that <code>[$class: 'Foo', arg1: 'something', ...]</code> syntax can not be
used, only <code>booleanParam(...)</code> and the like.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">parameters {
    booleanParam(<span style="color:#606">defaultValue</span>: <span style="color:#069">true</span>, <span style="color:#606">description</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>, <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">flag</span><span style="color:#710">'</span></span>)
    string(<span style="color:#606">defaultValue</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>, <span style="color:#606">description</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>, <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">SOME_STRING</span><span style="color:#710">'</span></span>)
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="options"><a class="anchor" href="#options"></a>Options</h3>
<div class="ulist">
<ul>
<li>
<p><em>Description</em>: Traditional <code>JobProperty</code>, such as <code>buildDiscarder</code> or
<code>disableConcurrentBuilds</code>, Declarative-specifc options, such as
<code>skipDefaultCheckout</code>, and "wrappers" that should wrap the entire build,
such as <code>timeout</code>.</p>
</li>
<li>
<p><em>Required</em>: No</p>
</li>
<li>
<p><em>Allowed In</em>: Top-level <code>pipeline</code> closure only.</p>
</li>
<li>
<p><em>Parameters</em>: None</p>
</li>
<li>
<p><em>Takes a Closure</em>: Yes</p>
</li>
<li>
<p><em>Closure Contents</em>: A sequence of one or more Declarative option or
job property configurations, using <code>@Symbol</code> names for constructors.</p>
<div class="ulist">
<ul>
<li>
<p>Note that <code>[$class: 'Foo', arg1: 'something', ...]</code> syntax can not be
used, only <code>booleanParam(...)</code> and the like.</p>
</li>
<li>
<p>Note that the <code>parameters</code> and <code>pipelineTriggers</code> <code>@Symbol</code> cannot
be used here directly.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Examples</em>:</p>
</li>
</ul>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">options {
    buildDiscarder(logRotator(<span style="color:#606">numToKeepStr</span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">1</span><span style="color:#710">'</span></span>))
    disableConcurrentBuilds()
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="declarative-subset-of-groovy"><a class="anchor" href="#declarative-subset-of-groovy"></a>Declarative Subset of Groovy</h3>
<div class="ulist">
<ul>
<li>
<p>Top-level has to be a block</p>
</li>
<li>
<p>No semicolons as statement separators. Each statement has to be on its
own line</p>
</li>
<li>
<p>Block must only consists of method call statements, assignment
statements, or property reference statement</p>
<div class="ulist">
<ul>
<li>
<p>A property reference statement is treated as no-arg method
invocation. So for example, <code>input</code> is treated as <code>input()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Expression has to be one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>Literals (except class literals)</p>
</li>
<li>
<p>Numbers: <code>1</code>, <code>3</code></p>
</li>
<li>
<p>Booleans: <code>true</code>, <code>false</code></p>
</li>
<li>
<p>String literals regardless of their quotations: <code>"foo"</code>, <code>'bar'</code></p>
</li>
<li>
<p>Multi-line string literals</p>
</li>
<li>
<p>Variable references: <code>x</code></p>
</li>
<li>
<p>Sequence of property references: <code>x.y.z</code></p>
</li>
<li>
<p>GString: <code>"hello ${exp}"</code></p>
</li>
<li>
<p>Literal list: <code>[exp,exp,...]</code></p>
</li>
<li>
<p>Literal map where keys are all constants: <code>[a:exp, b:exp, ... ]</code></p>
</li>
<li>
<p>Method calls where the left hand side is a variable reference or a
sequence of property references: <code>x.y.z(...)</code></p>
</li>
<li>
<p>Method calls (including <code>@Symbol</code> constructors like used above in
options, triggers and build parameters) where there is no left hand
side.</p>
</li>
<li>
<p>Closure without parameters: <code>{ ... }</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>


<footer id="footer">
<div class="container">
<div class="row">
<div class="links col-lg-8 col-md-12 col-sm-12">
<ul class="major-areas">
<li class="area solo col-md-3 col-sm-6 col-xs-6">
<div class="div-mar">
<h5>Resources</h5>
<ul class="resources">
<li>
<a href="/content/event-calendar">
Events
</a>
</li>
<li>
<a href="/doc">
Documentation
</a>
</li>
<li>
<a href="/node">
Blog
</a>
</li>
</ul>
</div>
</li>
<li class="area multi col-md-3 col-sm-6 col-xs-6">
<div class="div-mar">
<h5>Solutions</h5>
<ul>
<li>
<a href="/solutions/android">
Android
</a>
</li>
<li>
<a href="/solutions/c">
C/C++
</a>
</li>
<li>
<a href="/solutions/docker">
Docker
</a>
</li>
<li>
<a href="/solutions/embedded">
Embedded
</a>
</li>
<li>
<a href="/solutions/github">
GitHub
</a>
</li>
<li>
<a href="/solutions/java">
Java
</a>
</li>
<li>
<a href="/solutions/pipeline">
Continuous Delivery
</a>
</li>
<li>
<a href="/solutions/python">
Python
</a>
</li>
<li>
<a href="/solutions/ruby">
Ruby
</a>
</li>
</ul>
</div>
</li>
<li class="area multi col-md-3 col-sm-6 col-xs-6">
<div class="div-mar">
<h5>Project</h5>
<ul class="project">
<li>
<a href="https://issues.jenkins-ci.org">
Issue tracker
</a>
</li>
<li>
<a href="https://wiki.jenkins-ci.org">
Wiki
</a>
</li>
<li>
<a href="https://github.com/jenkinsci">
GitHub
</a>
</li>
<li>
<a href="https://ci.jenkins.io">
Jenkins on Jenkins
</a>
</li>
</ul>
</div>
</li>
<li class="area multi col-md-3 col-sm-6 col-xs-6">
<div class="div-mar">
<h5>Community</h5>
<ul class="community">
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-users">
Users mailing list
</a>
</li>
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-dev">
Developers mailing list
</a>
</li>
<li>
<a href="https://twitter.com/jenkinsci">
Twitter
</a>
</li>
<li>
<a href="https://reddit.com/r/jenkinsci">
Reddit
</a>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 footer-left">
<p class="box">
<a href="https://github.com/jenkins-infra/jenkins.io/edit/master/content//doc/pipeline/reference.adoc" title="Edit /doc/pipeline/reference.adoc on GitHub">
Improve this page
</a>
|
<a href="https://github.com/jenkins-infra/jenkins.io/commits/master/content//doc/pipeline/reference.adoc" title="View /doc/pipeline/reference.adoc history on GitHub">
Page history
</a>
</p>
<div class="license-box">
<div id="creativecommons">
<a href="https://creativecommons.org/licenses/by-sa/4.0/">
<p>
<img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
</p>
</a>
<p>
The content driving this site is licensed under the Creative Commons Attribution-ShareAlike 4.0 license.
</p>
</div>
</div>
</div>
</div>
</div>
</footer>
<!-- starting partial footer.html.haml -->
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-4216293-5', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  !function(d,s,id) {
    var js, fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
</script>

<!-- ending partial footer.html.haml -->
</body>
</html>
